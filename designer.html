<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://files.cdn.printful.com/embed/embed.js"></script>
</head>
<body>
  <div id="design-maker-container" style="height:800px;"></div>
  <div id="status" style="font-family:sans-serif;color:#444;margin-top:10px;"></div>

  <script>
window.addEventListener("message", (event) => {
  const data = event.data;
  const nonce = typeof data === "string" ? data : data?.nonce;

  if (nonce && typeof nonce === "string") {
    console.log("EDM Nonce empfangen:", nonce);

    new PFDesignMaker({
      elemId: "design-maker-container",
      nonce: nonce,
      onIframeLoaded: () => console.log("✅ EDM geladen"),
      onError: (err) => console.error("❌ EDM Fehler:", err)
    });
  } else {
    console.warn("⚠️ Ungültige nonce empfangen:", data);
  }
});
</script>

</body>
</html>
