<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://files.cdn.printful.com/embed/embed.js"></script>
</head>
<body>
  <div id="design-maker-container" style="height:800px;"></div>
  <div id="status" style="font-family:sans-serif;color:#444;margin-top:10px;"></div>

  <script>
    function log(msg) {
      document.getElementById("status").innerText = msg;
      console.log(msg);
    }

    window.addEventListener("message", (event) => {
      const nonce = event.data?.nonce;
      if (nonce) {
        log("Nonce empfangen, EDM wird geladen …");

        const manager = new PFDesignMaker({
          elemId: "design-maker-container",
          nonce: nonce,
          onIframeLoaded: () => log("✅ Design Maker erfolgreich geladen."),
          onError: (err) => log("❌ Fehler: " + JSON.stringify(err))
        });
      } else {
        log("⚠️ Keine gültige nonce empfangen.");
      }
    }, false);
  </script>
</body>
</html>
